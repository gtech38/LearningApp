  version: '3'
    
  services:
    db:
      restart: always
      #image: postgres:latest
      #environment:
      #  - POSTGRES_DB=postgres
      #  - POSTGRES_USER=docker
      #  - POSTGRES_PASSWORD=docker
      #  - POSTGRES_PORT= 5432
      volumes:
        - database:/var/lib/postgresql/data
      build:
        context: .
        dockerfile: Dockerfile_postgres
      ports:
        - "5432:5432"
      expose:
        - "5432"

    web:
      build: 
        context: .
        dockerfile: Dockerfile_django
      command: python3 manage.py runserver 0.0.0.0:8000
      volumes:
        - .:/code
      ports:
        - "3000:8000"
      depends_on:
        - db

    #react:
    #  restart: always
    #  build: 
    #    context: .
    #    dockerfile: Dockerfile_react
    #  volumes:
    #    - .:/app
        # One-way volume to use node_modules from inside image
    #    - /app/table/node_modules
    #  ports:
    #    - "3000:3000"
    #  environment:
    #        - NODE_ENV=development
    #  depends_on:
    #    - web    
    #  command: npm install
#
#    pgadmin:
#      image: dpage/pgadmin4
#      container_name: demo-pgadmin #you can change this
#      depends_on:
#       - db
#      ports:
#        - "5051:80"
#      environment:
#        PGADMIN_DEFAULT_EMAIL: pgadmin4@pgadmin.org
#        PGADMIN_DEFAULT_PASSWORD: root
#      restart: always

  volumes:
    database: